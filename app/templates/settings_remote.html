<h1>Remote Access</h1>
<div class="muted" style="margin-top:6px;">
  - 0.0.0.0 is a bind address (listen on all interfaces); browse via 127.0.0.1 or your LAN IP.<br>
  - For HTTPS, set certificate to your full chain (fullchain.pem) and matching private key.<br>
  - Port 443 is standard HTTPS. If you choose it, allow it in Windows Firewall and forward it on your router.
  </div>

<!-- Server Configuration Section -->
<section style="margin-top:24px;">
    <h2>Server Configuration</h2>
    <div style="display:flex; gap:8px; margin:6px 0 12px 0; flex-wrap:wrap;">
      <button type="button" class="btn btn-secondary" id="preset-local">Local only (127.0.0.1:8085, HTTP)</button>
      <button type="button" class="btn btn-secondary" id="preset-https">HTTPS on 443 (0.0.0.0)</button>
    </div>
    <form id="form-server" class="form-grid" style="grid-template-columns: repeat(3, minmax(220px, 1fr));">
        <label>Server Host
            <input type="text" name="server_host" class="input" placeholder="0.0.0.0"
                title="0.0.0.0 = Allow external connections, 127.0.0.1 = Local only">
        </label>

        <label>Server Port
            <input type="number" name="server_port" class="input" placeholder="8085" min="1" max="65535">
        </label>

        <label class="check">
            <input type="checkbox" name="external_access"> Enable external access (0.0.0.0)
        </label>

        <h3 style="margin-top: 20px; grid-column: 1/-1;">SSL/HTTPS Configuration</h3>
        <label class="check" style="align-self:end;">
            <input type="checkbox" name="ssl_enabled"> Enable SSL/HTTPS (Secure connections)
        </label>

        <label style="grid-column: span 2;">SSL Certificate File
            <div style="display:flex; gap:8px; align-items:center;">
                <input id="ssl-cert-input" type="text" name="ssl_cert_file" class="input" placeholder="certificate.crt"
                    title="Path to your SSL certificate or fullchain file (.crt, .pem)" style="flex:1;">
                <button type="button" class="btn btn-secondary browse-file-btn"
                    data-target="ssl-cert-input">Browse…</button>
            </div>
            <small class="muted">Use your full chain file (e.g., fullchain.pem). Leaf-only .crt can fail.
            </small>
        </label>

        <label style="grid-column: span 2;">SSL Private Key File
            <div style="display:flex; gap:8px; align-items:center;">
                <input id="ssl-key-input" type="text" name="ssl_key_file" class="input" placeholder="private.key"
                    title="Path to your SSL private key file (.key)" style="flex:1;">
                <button type="button" class="btn btn-secondary browse-file-btn"
                    data-target="ssl-key-input">Browse…</button>
            </div>
            <small class="muted">Full path to your SSL private key file (.key or .pem)</small>
        </label>

        <div class="row-actions">
            <button type="submit" class="btn btn-primary" id="save-server">Save Server Settings</button>
            <button type="button" class="btn btn-secondary" id="restart-server">Restart Server</button>
        </div>
    </form>
    <div id="msg-server" class="muted"></div>

    <div class="muted" id="server-links" style="margin-top:8px;">
      <span>Quick open:</span>
      <a id="link-local" class="link" href="#" target="_blank" rel="noopener">local</a>
      <span>·</span>
      <a id="link-domain" class="link" href="#" target="_blank" rel="noopener">domain</a>
    </div>
</section>

<!-- Remote Access Section -->
<section style="margin-top:32px;">
    <h2>Remote Access Settings</h2>
    <form id="form-remote" class="form-grid">
        <label class="check">
            <input type="checkbox" name="enable_remote_access"> Enable remote access features
        </label>

        <label>Public Base URL
            <input class="input" type="text" name="public_base_url" placeholder="https://your-server.example.com">
            <small class="muted">Your custom domain or public IP (optional)</small>
        </label>

        <label>Remote Port
            <input class="input" type="number" name="port" min="1" max="65535" placeholder="32400">
            <small class="muted">Port for remote access features (different from server port)</small>
        </label>

        <label class="check">
            <input type="checkbox" name="upnp"> Automatically configure port (UPnP)
        </label>

        <label>Allow fallback to insecure connections
            <select name="allow_insecure_fallback" class="input">
                <option value="never">Never</option>
                <option value="ask">Ask</option>
                <option value="always">Always</option>
            </select>
        </label>

        <div class="row-actions">
            <button type="submit" class="btn btn-primary" id="save-remote">Save Remote Settings</button>
        </div>
    </form>
    <div id="msg-remote" class="muted"></div>
</section>
