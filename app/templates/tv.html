{% extends "base.html" %}
{% block title %}TV Shows â€¢ Arctic{% endblock %}

{% block content %}
    <h1>TV Shows</h1>
    <div class="muted">{{ count or (items|length) }} titles</div>

    <div id="infinite-grid" class="grid" data-kind="tv" data-endpoint="/api/tv" data-page="{{ page or 1 }}" data-total-pages="{{ total_pages or 1 }}" data-page-size="{{ page_size or 60 }}">
        {% for s in items %}
        {% set meta = s.extra_json or {} %}
        {% set poster = meta.get('poster') or s.poster_url or '/static/img/placeholder.png' %}
        <a class="card" href="/show/{{ s.id }}" title="{{ s.title }}">
            <img loading="lazy" src="{{ poster }}" alt="{{ s.title }}">
            <div class="card-meta">
                <div class="title">{{ s.title }}</div>
                {% if meta.get('first_air_date') %}<div class="sub">{{ meta['first_air_date'][:4] }}</div>{% endif %}
            </div>
        </a>
        {% else %}
        <p>No TV shows indexed yet.</p>
        {% endfor %}
    </div>
    <div id="infinite-sentinel" style="height: 1px;"></div>
{% block scripts %}
{{ super() }}
<script src="/static/js/infinite.js?v={{ ASSET_V }}" nonce="{{ request.state.csp_nonce }}"></script>
{% endblock %}
{% endblock %}
