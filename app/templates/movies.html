{% extends "base.html" %}
{% block title %}Movies â€¢ Arctic{% endblock %}

{% block content %}
    <h1>Movies</h1>
    <div class="muted">{{ count or (items|length) }} titles</div>

    <div id="infinite-grid" class="grid" data-kind="movie" data-endpoint="/api/movies" data-page="{{ page or 1 }}" data-total-pages="{{ total_pages or 1 }}" data-page-size="{{ page_size or 60 }}">
        {% for m in items %}
        {% set ej = m.extra_json or {} %}
        {% set poster = ej.get('poster') or m.poster_url or '/static/img/placeholder.png' %}
        <a class="card" href="/movie/{{ m.id }}" title="{{ m.title }}">
            <img loading="lazy" src="{{ poster }}" alt="{{ m.title }}">
            <div class="card-meta">
                <div class="title">{{ m.title }}</div>
                {% if m.year %}<div class="sub">{{ m.year }}</div>{% endif %}
            </div>
        </a>
        {% endfor %}
    </div>
    <div id="infinite-sentinel" style="height: 1px;"></div>
{% block scripts %}
{{ super() }}
<script src="/static/js/infinite.js?v={{ ASSET_V }}" nonce="{{ request.state.csp_nonce }}"></script>
{% endblock %}
{% endblock %}
